Index: extensions/python/dom/src/Makefile.in
===================================================================
RCS file: /cvsroot/mozilla/extensions/python/dom/src/Makefile.in,v
retrieving revision 1.3
diff -u -r1.3 Makefile.in
--- extensions/python/dom/src/Makefile.in	5 Oct 2006 10:44:02 -0000	1.3
+++ extensions/python/dom/src/Makefile.in	21 May 2007 00:23:40 -0000
@@ -22,7 +22,7 @@
 # We always need the Python and pyxpcom includes and libs.
 LOCAL_INCLUDES = $(MOZ_PYTHON_INCLUDES)
 EXTRA_LIBS += $(MOZ_PYTHON_LIBS) \
-              $(DIST)/lib/$(LIB_PREFIX)pyxpcom.$(LIB_SUFFIX) \
+              $(DIST)/lib/$(DLL_PREFIX)pyxpcom$(DLL_SUFFIX) \
               $(NULL)
 
 # In the shorter term we need JS too.
? config/system_wrappers
Index: config/rules.mk
===================================================================
RCS file: /cvsroot/mozilla/config/rules.mk,v
retrieving revision 3.554
diff -u -r3.554 rules.mk
--- config/rules.mk	14 May 2007 14:21:44 -0000	3.554
+++ config/rules.mk	21 May 2007 00:41:20 -0000
@@ -775,6 +775,12 @@
 install:: $(SDK_HEADERS)
 	$(SYSINSTALL) $(IFLAGS1) $^ $(DESTDIR)$(includedir)/$(MODULE)
 endif
+
+ifneq (,$(SDK_LIBRARY))
+install:: $(SDK_LIBRARY)
+	$(SYSINSTALL) $(IFLAGS1) $^ $(DESTDIR)$(mozappdir)/sdk
+endif
+
 endif
 
 install:: $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(LIBRARY) $(PROGRAM) $(SIMPLE_PROGRAMS) $(JAVA_LIBRARY)
--- extensions/python/xpcom/src/module/Makefile.in.orig	2007-05-28 20:48:26.000000000 +0200
+++ extensions/python/xpcom/src/module/Makefile.in	2007-05-28 20:49:03.000000000 +0200
@@ -95,8 +95,8 @@
 
 install::
 ifneq ($(OS_ARCH),WINNT)
-	$(SYSINSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(DISTDIR)$(pyexecdir)/xpcom
-	mv $(DISTDIR)$(pyexecdir)/xpcom/$(SHARED_LIBRARY) $(DISTDIR)$(pyexecdir)/xpcom/_xpcom$(MOZ_PYTHON_DLL_SUFFIX)
+	$(SYSINSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(DESTDIR)$(pyexecdir)/xpcom
+	mv $(DESTDIR)$(pyexecdir)/xpcom/$(SHARED_LIBRARY) $(DESTDIR)$(pyexecdir)/xpcom/_xpcom$(MOZ_PYTHON_DLL_SUFFIX)
 endif
 
 clobber::
--- extensions/python/xpcom/Makefile.in.orig	2007-05-29 10:17:10.000000000 +0200
+++ extensions/python/xpcom/Makefile.in	2007-05-29 10:17:22.000000000 +0200
@@ -97,9 +97,9 @@
 	$(INSTALL) $(PYSRCS_XPCOMTOOLS) $(DIST)/bin/python/xpcom/tools
 
 install::
-	$(SYSINSTALL) $(IFLAGS1) $(PYSRCS_XPCOM) $(DISTDIR)$(pyexecdir)/xpcom
-	$(SYSINSTALL) $(IFLAGS1) $(PYSRCS_XPCOMCLIENT) $(DISTDIR)$(pyexecdir)/xpcom/client
-	$(SYSINSTALL) $(IFLAGS1) $(PYSRCS_XPCOMSERVER) $(DISTDIR)$(pyexecdir)/xpcom/server
+	$(SYSINSTALL) $(IFLAGS1) $(PYSRCS_XPCOM) $(DESTDIR)$(pyexecdir)/xpcom
+	$(SYSINSTALL) $(IFLAGS1) $(PYSRCS_XPCOMCLIENT) $(DESTDIR)$(pyexecdir)/xpcom/client
+	$(SYSINSTALL) $(IFLAGS1) $(PYSRCS_XPCOMSERVER) $(DESTDIR)$(pyexecdir)/xpcom/server
 
 clobber::
 	rm -rf $(DIST)/bin/python/xpcom
